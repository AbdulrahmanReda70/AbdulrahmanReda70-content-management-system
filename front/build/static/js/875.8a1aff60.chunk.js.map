{"version":3,"file":"static/js/875.8a1aff60.chunk.js","mappings":"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","sources":["components/InputModal.js","user/UserProfile.js"],"sourcesContent":["import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Input from \"@mui/material/Input\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport Stack from \"@mui/material/Stack\";\nimport { fetch_u } from \"../utility/fetch\";\nimport { saveUserInfo } from \"../auth/authService\";\nimport AlertPopup from \"./popup/AlertPopup\";\n\nexport default function InputModal({ modalOpen, setModalOpen, from, setUser }) {\n  function renderModalContent() {\n    switch (from) {\n      case \"username\":\n        return ModalF(modalOpen, setModalOpen, \"username\", setUser);\n      case \"email\":\n        return ModalF(modalOpen, setModalOpen, \"email\", setUser);\n      case \"password\":\n        return ModalF(modalOpen, setModalOpen, \"password\", setUser);\n      default:\n        return null;\n    }\n  }\n\n  return <>{renderModalContent()}</>;\n}\n\nfunction ModalF(modalOpen, setModalOpen, title, setUser) {\n  const [openPop, setOpenPop] = React.useState(false);\n  const [res, setRes] = React.useState(false);\n\n  async function handleUpdate(field, value, confirmPass) {\n    if (field === \"password\" && value !== confirmPass) {\n      setRes({ error: true, message: \"Passwords should match\" });\n      setOpenPop(true);\n      return null;\n    }\n\n    const res = await fetch_u(\"http://localhost:8000/api/user_update\", \"POST\", {\n      [field]: value,\n    });\n\n    if (res.error) {\n      setRes({ error: true, message: res.message });\n    } else {\n      setRes({ error: false, message: res.data.message });\n      console.log(res);\n      saveUserInfo(res.data.user);\n      setUser(res.data.user);\n    }\n    setOpenPop(true);\n  }\n\n  return (\n    <>\n      <AlertPopup is_open={openPop} setIs_open={setOpenPop} status={res} />\n      <React.Fragment>\n        <Dialog open={modalOpen} onClose={() => setModalOpen(false)}>\n          <DialogActions>\n            <form\n              onSubmit={(event) => {\n                event.preventDefault();\n                const inputValue = event.target[0].value;\n                const confirmPass = event.target[1].value;\n                handleUpdate(title, inputValue, confirmPass);\n                setModalOpen(false);\n              }}\n            >\n              <Stack spacing={2}>\n                <FormControl>\n                  <Input\n                    className=\"h-[40px] p-5 pl-1\"\n                    autoFocus\n                    required\n                    placeholder={`Enter ${title.toLowerCase()}`}\n                  />\n                  {title === \"password\" && (\n                    <Input\n                      className=\"h-[40px] p-3 mt-5 pl-1\"\n                      autoFocus\n                      required\n                      placeholder={`Confirm Password`}\n                    />\n                  )}\n                </FormControl>\n                <Button type=\"submit\">Update</Button>\n              </Stack>\n            </form>\n          </DialogActions>\n        </Dialog>\n      </React.Fragment>\n    </>\n  );\n}\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { fetch_u } from \"../utility/fetch\";\nimport InputModal from \"../components/InputModal\";\nimport { getUserInfo } from \"../auth/authService\";\nimport { TextareaAutosize } from \"@mui/material\";\nimport { useNavigate } from \"react-router\";\n\nfunction UserProfile() {\n  const [modalOpen, setModalOpen] = useState(false);\n  const [from, setFrom] = useState(false);\n  const [user, setUser] = useState({});\n  const [description, setDescription] = useState(\"\");\n  const nav = useNavigate();\n  const userL = getUserInfo();\n\n  if (!userL) {\n    window.location.href = \"/signin\";\n  }\n  console.log(user, \"user\");\n\n  async function handleUpdate(e) {\n    setFrom(e);\n    setModalOpen(true);\n  }\n\n  async function handleDeleteAccount() {\n    let conf = window.confirm(\n      \"Are you sure you want to delete your account?⚠️\"\n    );\n    if (conf) {\n      try {\n        const res = await fetch_u(\n          \"http://localhost:8000/api/user_delete\",\n          \"DELETE\"\n        );\n\n        if (!res.error) {\n          console.log(\"Account deleted successfully:\", res.message);\n          localStorage.clear();\n          nav(\"/signin\", { replace: true });\n        } else {\n          console.error(\"Failed to delete account:\", res.message);\n          alert(\"Failed to delete account. Please try again.\");\n        }\n      } catch (error) {\n        console.error(\"An error occurred:\", error);\n        alert(\n          \"An error occurred while deleting your account. Please try again.\"\n        );\n      }\n    }\n  }\n\n  // Debounce function to limit API calls\n  const debounce = (func, delay) => {\n    let timer;\n    return (...args) => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        func(...args);\n      }, delay);\n    };\n  };\n\n  // Function to update the description on the server\n  const updateDescription = async (newDescription) => {\n    const res = await fetch_u(\"http://localhost:8000/api/user_update\", \"POST\", {\n      description: newDescription,\n    });\n\n    if (!res.error) {\n      console.log(\"Description updated successfully:\", res.data);\n    } else {\n      console.error(\"Failed to update description:\", res.message);\n    }\n  };\n\n  // Debounced version of the updateDescription function\n  const debouncedUpdateDescription = useCallback(\n    debounce(updateDescription, 1000),\n    []\n  );\n\n  // Handle description change\n  const handleDescription = (e) => {\n    const newDescription = e.target.value;\n    setDescription(newDescription);\n    debouncedUpdateDescription(newDescription); // Call the debounced function\n  };\n\n  useEffect(() => {\n    console.log(userL, \"user\");\n\n    setUser(userL);\n    if (userL?.description) {\n      setDescription(userL?.description);\n    }\n  }, []);\n\n  if (!userL) {\n    nav(\"/signin\", { replace: true });\n  }\n\n  return (\n    <div className=\"container-c\">\n      <InputModal\n        setUser={setUser}\n        modalOpen={modalOpen}\n        setModalOpen={setModalOpen}\n        from={from}\n      />\n      <div className=\"flex items-center gap-2 mt-10 mb-4\">\n        <img src={user.avatar} alt=\"\" className=\"w-12\" />\n        <h2 className=\"text-4xl\">{user.username}</h2>\n      </div>\n      <div>\n        <TextareaAutosize\n          value={description}\n          maxLength={200}\n          onChange={handleDescription} // Use the debounced handler\n          placeholder=\"Tell the world about yourself\"\n          className={`max-w-[600px] h-[100px] max-h-[300px] text-xl mt-5 mb-[80px] pb-[20px] `}\n        />\n      </div>\n      <div className=\"flex flex-col gap-5 \">\n        <div\n          onClick={() => handleUpdate(\"username\")}\n          className=\"flex justify-between items-center cursor-pointer\"\n        >\n          <div className=\"text-xl\">Username</div>\n          <div className=\"text-[#8f8e8e]\"> {user.username}</div>\n        </div>\n        <div\n          onClick={() => handleUpdate(\"email\")}\n          className=\"flex justify-between items-center cursor-pointer\"\n        >\n          <div className=\"text-xl\">Email</div>\n          <div className=\"text-[#8f8e8e]\">{user.email}</div>\n        </div>\n        <div\n          onClick={() => handleUpdate(\"password\")}\n          className=\"flex justify-between items-center cursor-pointer\"\n        >\n          <div className=\"text-xl\">Password</div>\n          <div className=\"text-[#8f8e8e]\">*****</div>\n        </div>\n        <div\n          onClick={handleDeleteAccount}\n          className=\"text-red-700 mt-5 cursor-pointer w-fit\"\n        >\n          Delete Account\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserProfile;\n"],"names":["InputModal","_ref","modalOpen","setModalOpen","from","setUser","_jsx","_Fragment","children","ModalF","renderModalContent","title","openPop","setOpenPop","React","res","setRes","_jsxs","AlertPopup","is_open","setIs_open","status","Dialog","open","onClose","DialogActions","onSubmit","event","preventDefault","inputValue","target","value","confirmPass","async","field","error","message","fetch_u","data","console","log","saveUserInfo","user","handleUpdate","Stack","spacing","FormControl","Input","className","autoFocus","required","placeholder","concat","toLowerCase","Button","type","useState","setFrom","description","setDescription","nav","useNavigate","userL","getUserInfo","e","window","location","href","debouncedUpdateDescription","useCallback","debounce","func","delay","timer","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","newDescription","useEffect","replace","src","avatar","alt","username","TextareaAutosize","maxLength","onChange","onClick","email","confirm","alert","localStorage","clear"],"sourceRoot":""}