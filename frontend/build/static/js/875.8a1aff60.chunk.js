"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[875],{875:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(5043),r=t(8947),l=t(5877),n=t(7561),c=t(5302),o=t(5534),i=t(9347),u=t(2851),d=t(1906),m=t(4458),p=t(579);function x(e){let{modalOpen:s,setModalOpen:t,from:a,setUser:r}=e;return(0,p.jsx)(p.Fragment,{children:function(){switch(a){case"username":return h(s,t,"username",r);case"email":return h(s,t,"email",r);case"password":return h(s,t,"password",r);default:return null}}()})}function h(e,s,t,x){const[h,f]=a.useState(!1),[g,j]=a.useState(!1);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.A,{is_open:h,setIs_open:f,status:g}),(0,p.jsx)(a.Fragment,{children:(0,p.jsx)(o.A,{open:e,onClose:()=>s(!1),children:(0,p.jsx)(i.A,{children:(0,p.jsx)("form",{onSubmit:e=>{e.preventDefault();const a=e.target[0].value,l=e.target[1].value;!async function(e,s,t){if("password"===e&&s!==t)return j({error:!0,message:"Passwords should match"}),f(!0),null;const a=await(0,r.Z)("http://localhost:8000/api/user_update","POST",{[e]:s});a.error?j({error:!0,message:a.message}):(j({error:!1,message:a.data.message}),console.log(a),(0,d.$K)(a.data.user),x(a.data.user)),f(!0)}(t,a,l),s(!1)},children:(0,p.jsxs)(u.A,{spacing:2,children:[(0,p.jsxs)(n.A,{children:[(0,p.jsx)(c.A,{className:"h-[40px] p-5 pl-1",autoFocus:!0,required:!0,placeholder:"Enter ".concat(t.toLowerCase())}),"password"===t&&(0,p.jsx)(c.A,{className:"h-[40px] p-3 mt-5 pl-1",autoFocus:!0,required:!0,placeholder:"Confirm Password"})]}),(0,p.jsx)(l.A,{type:"submit",children:"Update"})]})})})})})]})}var f=t(4268),g=t(3216);const j=function(){const[e,s]=(0,a.useState)(!1),[t,l]=(0,a.useState)(!1),[n,c]=(0,a.useState)({}),[o,i]=(0,a.useState)(""),u=(0,g.Zp)(),m=(0,d.ug)();async function h(e){l(e),s(!0)}m||(window.location.href="/signin"),console.log(n,"user");const j=(0,a.useCallback)(((e,s)=>{let t;return function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];clearTimeout(t),t=setTimeout((()=>{e(...r)}),s)}})((async e=>{const s=await(0,r.Z)("http://localhost:8000/api/user_update","POST",{description:e});s.error?console.error("Failed to update description:",s.message):console.log("Description updated successfully:",s.data)}),1e3),[]);return(0,a.useEffect)((()=>{console.log(m,"user"),c(m),null!==m&&void 0!==m&&m.description&&i(null===m||void 0===m?void 0:m.description)}),[]),m||u("/signin",{replace:!0}),(0,p.jsxs)("div",{className:"container-c",children:[(0,p.jsx)(x,{setUser:c,modalOpen:e,setModalOpen:s,from:t}),(0,p.jsxs)("div",{className:"flex items-center gap-2 mt-10 mb-4",children:[(0,p.jsx)("img",{src:n.avatar,alt:"",className:"w-12"}),(0,p.jsx)("h2",{className:"text-4xl",children:n.username})]}),(0,p.jsx)("div",{children:(0,p.jsx)(f.A,{value:o,maxLength:200,onChange:e=>{const s=e.target.value;i(s),j(s)},placeholder:"Tell the world about yourself",className:"max-w-[600px] h-[100px] max-h-[300px] text-xl mt-5 mb-[80px] pb-[20px] "})}),(0,p.jsxs)("div",{className:"flex flex-col gap-5 ",children:[(0,p.jsxs)("div",{onClick:()=>h("username"),className:"flex justify-between items-center cursor-pointer",children:[(0,p.jsx)("div",{className:"text-xl",children:"Username"}),(0,p.jsxs)("div",{className:"text-[#8f8e8e]",children:[" ",n.username]})]}),(0,p.jsxs)("div",{onClick:()=>h("email"),className:"flex justify-between items-center cursor-pointer",children:[(0,p.jsx)("div",{className:"text-xl",children:"Email"}),(0,p.jsx)("div",{className:"text-[#8f8e8e]",children:n.email})]}),(0,p.jsxs)("div",{onClick:()=>h("password"),className:"flex justify-between items-center cursor-pointer",children:[(0,p.jsx)("div",{className:"text-xl",children:"Password"}),(0,p.jsx)("div",{className:"text-[#8f8e8e]",children:"*****"})]}),(0,p.jsx)("div",{onClick:async function(){if(window.confirm("Are you sure you want to delete your account?\u26a0\ufe0f"))try{const e=await(0,r.Z)("http://localhost:8000/api/user_delete","DELETE");e.error?(console.error("Failed to delete account:",e.message),alert("Failed to delete account. Please try again.")):(console.log("Account deleted successfully:",e.message),localStorage.clear(),u("/signin",{replace:!0}))}catch(e){console.error("An error occurred:",e),alert("An error occurred while deleting your account. Please try again.")}},className:"text-red-700 mt-5 cursor-pointer w-fit",children:"Delete Account"})]})]})}}}]);
//# sourceMappingURL=875.8a1aff60.chunk.js.map