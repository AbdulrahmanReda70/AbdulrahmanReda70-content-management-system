"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[138],{138:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Y});var s=o(5043),a=o(3216),r=o(8947),n=o(4268),i=o(4458),l=o(5877),c=o(5534),d=o(9347),u=o(9379),p=o(45),x=o(8387),m=o(8610),h=o(4535),g=o(6262),f=o(8206),v=o(2532),A=o(552);function j(e){return(0,A.Ay)("MuiDialogContent",e)}(0,v.A)("MuiDialogContent",["root","dividers"]);function b(e){return(0,A.Ay)("MuiDialogTitle",e)}const w=(0,v.A)("MuiDialogTitle",["root"]);var y=o(579);const C=["className","dividers"],N=(0,h.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})((0,g.A)((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(w.root," + &")]:{paddingTop:0}}}]}}))),S=s.forwardRef((function(e,t){const o=(0,f.b)({props:e,name:"MuiDialogContent"}),{className:s,dividers:a=!1}=o,r=(0,p.A)(o,C),n=(0,u.A)((0,u.A)({},o),{},{dividers:a}),i=(e=>{const{classes:t,dividers:o}=e,s={root:["root",o&&"dividers"]};return(0,m.A)(s,j,t)})(n);return(0,y.jsx)(N,(0,u.A)({className:(0,x.A)(i.root,s),ownerState:n,ref:t},r))}));var T=o(1542),D=o(5865);function k(e){return(0,A.Ay)("MuiDialogContentText",e)}(0,v.A)("MuiDialogContentText",["root"]);const M=["children","className"],R=(0,h.Ay)(D.A,{shouldForwardProp:e=>(0,T.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_=s.forwardRef((function(e,t){const o=(0,f.b)({props:e,name:"MuiDialogContentText"}),{children:s,className:a}=o,r=(0,p.A)(o,M),n=(e=>{const{classes:t}=e,o=(0,m.A)({root:["root"]},k,t);return(0,u.A)((0,u.A)({},t),o)})(r);return(0,y.jsx)(R,(0,u.A)((0,u.A)({component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:r,className:(0,x.A)(n.root,a)},o),{},{classes:n}))}));var O=o(2563);const P=["className","id"],E=(0,h.Ay)(D.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Z=s.forwardRef((function(e,t){const o=(0,f.b)({props:e,name:"MuiDialogTitle"}),{className:a,id:r}=o,n=(0,p.A)(o,P),i=o,l=(e=>{const{classes:t}=e;return(0,m.A)({root:["root"]},b,t)})(i),{titleId:c=r}=s.useContext(O.A);return(0,y.jsx)(E,(0,u.A)({component:"h2",className:(0,x.A)(l.root,a),ownerState:i,ref:t,variant:"h6",id:null!==r&&void 0!==r?r:c},n))})),F=e=>{let{title:t,content:o,open:s,onClose:a,onConfirm:r}=e;return(0,y.jsxs)(c.A,{open:s,onClose:a,children:[(0,y.jsx)(Z,{children:t}),(0,y.jsx)(S,{children:(0,y.jsx)(_,{children:o})}),(0,y.jsxs)(d.A,{children:[(0,y.jsx)(l.A,{onClick:a,children:"Cancel"}),(0,y.jsx)(l.A,{onClick:r,autoFocus:!0,children:"Confirm"})]})]})};var L=o(7196),U=o(8185),z=o(4625),I=o(2716);const Y=function(){const[e,t]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[u,p]=(0,s.useState)(null),[x,m]=s.useState(!1),[h,g]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[A,j]=(0,s.useState)(null),[b,w]=(0,s.useState)(null),{setCanFetch:C,setHomePosts:N}=(0,I.j)(),S=(0,a.zy)().state.from,T=(0,a.Zp)();function D(){m(!1)}const k=(0,a.g)().id;return(0,s.useEffect)((()=>{!async function(){let e=await(0,r.Z)("http://localhost:8000/api/post_action/".concat(k));t(e.data.title),l(e.data.body),j(e.data.image),v(e.data.likes_count),console.log(e),e.data.liked?g(!0):g(!1)}()}),[k]),e?(0,y.jsxs)("div",{children:[(0,y.jsx)(F,{open:x,onClose:D,title:"Confirm Deletion",content:"Are you sure you want to delete this post? Once deleted, it cannot be recovered.",onConfirm:async function(){D();let e=await(0,r.Z)("http://localhost:8000/api/delete_post/".concat(k),"DELETE");e.error?p({error:!0,message:e.message}):(p({error:!1,message:e.data.message}),N([]),C(!0),setTimeout((()=>{T(S,{replace:!0})}),1200)),d(!0)}}),(0,y.jsx)(i.A,{message:"Post created successfully",is_open:c,setIs_open:d,status:u}),(0,y.jsxs)("div",{className:"container-c",children:[(0,y.jsxs)("label",{className:"flex items-center justify-center w-60 h-14 cursor-pointer border-2 border-dashed border-gray-400 rounded-lg hover:border-blue-500 transition duration-300",children:[(0,y.jsx)("span",{className:"text-white",children:"Upload Image"}),(0,y.jsx)("input",{type:"file",className:"hidden",onChange:e=>{j(e.target.files[0]),w(URL.createObjectURL(e.target.files[0]))}})]}),(0,y.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,y.jsx)("button",{onClick:function(){m(!0)},className:"bg-red-500 flex ",children:"Delete"}),(0,y.jsx)("button",{onClick:async function(){let t=new FormData;t.append("title",e),t.append("body",o),(A||b)&&t.append("image",A);let s=await(0,r.Z)("http://localhost:8000/api/update_post/".concat(k),"POST",t);s.error?p({error:!0,message:s.message}):p({error:!1,message:s.data.message}),d(!0)},className:"bg-green flex ",children:"Update"})]}),(0,y.jsx)("div",{children:(0,y.jsx)(n.A,{value:e,onChange:e=>t(e.target.value),placeholder:"Title",className:"w-[600px] h-[100px] text-5xl mb-[30px] pb-[20px] "})}),(0,y.jsx)("div",{className:"flex justify-center mb-8",children:(0,y.jsx)("img",{className:"h-[500px] w-[100%] rounded object-cover",src:b||"http://localhost:8000/storage/".concat(A),alt:"img"})}),(0,y.jsx)("div",{children:(0,y.jsx)(n.A,{value:o,onChange:e=>l(e.target.value),placeholder:"Tell Your Story",className:"w-[600px]  text-2xl"})}),(0,y.jsxs)("div",{className:"flex gap-x-1 mt-5 items-end",children:[(0,y.jsx)(z.P.div,{className:"cursor-pointer flex",onClick:async function(){g((e=>!e));try{(await(0,r.Z)("http://localhost:8000/api/like_post/".concat(k),"POST")).data.liked?(g(!0),v((e=>e+1))):(g(!1),v((e=>Math.max(e-1,0))))}catch(e){console.log("Error:",e)}},whileTap:{scale:1.2},animate:{color:h?"#ff2e63":"#ccc"},transition:{duration:.2},children:h?(0,y.jsx)(L.ObQ,{fontSize:"28px"}):(0,y.jsx)(L.fLg,{fontSize:"28px"})}),(0,y.jsx)("div",{children:f})]})]})]}):(0,y.jsxs)("div",{className:"container-c",children:[(0,y.jsxs)("div",{className:"flex items-center mb-5 flex-row-reverse gap-x-2",children:[(0,y.jsx)(U.A,{variant:"rectangular",width:80,height:40,className:"rounded"}),(0,y.jsx)(U.A,{variant:"rectangular",className:"rounded",width:80,height:40})]}),(0,y.jsx)(U.A,{variant:"rectangular",height:50,className:"mb-[50px]"}),(0,y.jsx)(U.A,{variant:"rectangular",height:300})]})}}}]);
//# sourceMappingURL=138.c3911311.chunk.js.map